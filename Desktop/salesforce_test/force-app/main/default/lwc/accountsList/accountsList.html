<template>
    <lightning-card title="Accounts List">
        <lightning-button-icon icon-name="utility:delete" alternative-text="Delete" title="Delete"
            onclick={handleDelete} class="slds-m-left_small slds-m-top_small slds-align_end"></lightning-button-icon>
        <template if:true={loading}>
            <div class="slds-p-around_medium">
                <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
            </div>
        </template>

        <template if:true={error}>
            <div class="slds-p-around_medium slds-text-color_error">
                {error}
            </div>
        </template>

        <template if:true={visibleAccounts}>
            <lightning-datatable 
            key-field="Id" 
            data={visibleAccounts} 
            columns={columns} 
            sorted-by={sortedBy}
            sorted-direction={sortedDirection} 
            onsort={handleSort} 
            onrowselection={handleRowSelection}>
            </lightning-datatable>
        </template>
        <!-- Pagination controls -->
        <div class="slds-m-around_medium slds-align_absolute-center">
            <lightning-button label="First" onclick={goToFirst} disabled={isFirstPage}></lightning-button>
            <lightning-button label="Previous" onclick={goToPrevious} disabled={isFirstPage}></lightning-button>
            <span class="slds-m-horizontal_small">
                Page {currentPage} of {totalPages}
            </span>
            <lightning-button label="Next" onclick={goToNext} disabled={isLastPage}></lightning-button>
            <lightning-button label="Last" onclick={goToLast} disabled={isLastPage}></lightning-button>
        </div>
    </lightning-card>
</template>